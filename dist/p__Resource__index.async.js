"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[296],{6422:function(Je,U,t){t.r(U),t.d(U,{default:function(){return Ie}});var ae=t(90228),M=t.n(ae),oe=t(87999),Y=t.n(oe),le=t(48305),N=t.n(le),ie=t(20237),ue=t(18534),W=t(57596),z=t(1151),de=t(96370),o=t(28730),se=t(21897),ve=t(55273),ce=t(81248),fe=t(58782),Q=t(11514),me=t(58993),G=t(1253),he=t(13458),ge=t(3155),ye=t(35043),Re=t(65589),p=t(85108),X=t(6169),c=t(93236),Ze=t(85230),i=t(62086),xe=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],Pe=["record","position","creatorButtonText","newRecordType","parentKey","style"],k=c.createContext(void 0);function q(e){var m=e.children,g=e.record,x=e.position,T=e.newRecordType,R=e.parentKey,C=(0,c.useContext)(k);return c.cloneElement(m,(0,o.Z)((0,o.Z)({},m.props),{},{onClick:function(){var S=(0,de.Z)((0,z.Z)().mark(function D(B){var I,K,b,j;return(0,z.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(I=(K=m.props).onClick)===null||I===void 0?void 0:I.call(K,B);case 2:if(j=v.sent,j!==!1){v.next=5;break}return v.abrupt("return");case 5:C==null||(b=C.current)===null||b===void 0||b.addEditRecord(g,{position:x,newRecordType:T,parentKey:R});case 6:case"end":return v.stop()}},D)}));function P(D){return S.apply(this,arguments)}return P}()}))}function _(e){var m,g,x=(0,fe.YB)(),T=e.onTableChange,R=e.maxLength,C=e.formItemProps,S=e.recordCreatorProps,P=e.rowKey,D=e.controlled,B=e.defaultValue,I=e.onChange,K=e.editableFormRef,b=(0,W.Z)(e,xe),j=(0,c.useRef)(void 0),$=(0,c.useRef)(),v=(0,c.useRef)();(0,c.useImperativeHandle)(b.actionRef,function(){return $.current},[$.current]);var J=(0,Re.Z)(function(){return e.value||B||[]},{value:e.value,onChange:e.onChange}),Z=(0,ue.Z)(J,2),n=Z[0],h=Z[1],f=c.useMemo(function(){return typeof P=="function"?P:function(r,s){return r[P]||s}},[P]),w=(0,Q.J)(function(r){if(typeof r=="number"&&!e.name){if(r>=n.length)return r;var s=n&&n[r];return f==null?void 0:f(s,r)}if((typeof r=="string"||r>=n.length)&&e.name){var a=n.findIndex(function(l,u){var d;return(f==null||(d=f(l,u))===null||d===void 0?void 0:d.toString())===(r==null?void 0:r.toString())});if(a!==-1)return a}return r});(0,c.useImperativeHandle)(K,function(){var r=function(l){var u,d;if(l==null)throw new Error("rowIndex is required");var y=w(l),V=[e.name,(u=y==null?void 0:y.toString())!==null&&u!==void 0?u:""].flat(1).filter(Boolean);return(d=v.current)===null||d===void 0?void 0:d.getFieldValue(V)},s=function(){var l,u=[e.name].flat(1).filter(Boolean);if(Array.isArray(u)&&u.length===0){var d,y=(d=v.current)===null||d===void 0?void 0:d.getFieldsValue();return Array.isArray(y)?y:Object.keys(y).map(function(V){return y[V]})}return(l=v.current)===null||l===void 0?void 0:l.getFieldValue(u)};return(0,o.Z)((0,o.Z)({},v.current),{},{getRowData:r,getRowsData:s,setRowData:function(l,u){var d,y;if(l==null)throw new Error("rowIndex is required");var V=w(l),A=[e.name,(d=V==null?void 0:V.toString())!==null&&d!==void 0?d:""].flat(1).filter(Boolean),Ge=Object.assign({},(0,o.Z)((0,o.Z)({},r(l)),u||{})),pe=(0,X.Z)({},A,Ge);return(y=v.current)===null||y===void 0||y.setFieldsValue(pe),!0}})},[w,e.name,v.current]),(0,c.useEffect)(function(){e.controlled&&(n||[]).forEach(function(r,s){var a;(a=v.current)===null||a===void 0||a.setFieldsValue((0,ie.Z)({},"".concat(f(r,s)),r))},{})},[(0,me.ZP)(n),e.controlled]),(0,c.useEffect)(function(){if(e.name){var r;v.current=e==null||(r=e.editable)===null||r===void 0?void 0:r.form}},[(m=e.editable)===null||m===void 0?void 0:m.form,e.name]);var F=S||{},ne=F.record,E=F.position,Ke=F.creatorButtonText,Oe=F.newRecordType,Ae=F.parentKey,Me=F.style,Ne=(0,W.Z)(F,Pe),re=E==="top",O=(0,c.useMemo)(function(){return typeof R=="number"&&R<=(n==null?void 0:n.length)?!1:S!==!1&&(0,i.jsx)(q,{record:(0,G.h)(ne,n==null?void 0:n.length,n)||{},position:E,parentKey:(0,G.h)(Ae,n==null?void 0:n.length,n),newRecordType:Oe,children:(0,i.jsx)(ge.ZP,(0,o.Z)((0,o.Z)({type:"dashed",style:(0,o.Z)({display:"block",margin:"10px 0",width:"100%"},Me),icon:(0,i.jsx)(se.Z,{})},Ne),{},{children:Ke||x.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[S,R,n==null?void 0:n.length]),Le=(0,c.useMemo)(function(){return O?re?{components:{header:{wrapper:function(s){var a,l=s.className,u=s.children;return(0,i.jsxs)("thead",{className:l,children:[u,(0,i.jsxs)("tr",{style:{position:"relative"},children:[(0,i.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:O}),(0,i.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(a=b.columns)===null||a===void 0?void 0:a.length,children:O})]})]})}}}}:{tableViewRender:function(s,a){var l,u;return(0,i.jsxs)(i.Fragment,{children:[(l=(u=e.tableViewRender)===null||u===void 0?void 0:u.call(e,s,a))!==null&&l!==void 0?l:a,O]})}}:{}},[re,O]),H=(0,o.Z)({},e.editable),We=(0,Q.J)(function(r,s){var a,l,u;if((a=e.editable)===null||a===void 0||(l=a.onValuesChange)===null||l===void 0||l.call(a,r,s),(u=e.onValuesChange)===null||u===void 0||u.call(e,s,r),e.controlled){var d;e==null||(d=e.onChange)===null||d===void 0||d.call(e,s)}});return(e!=null&&e.onValuesChange||(g=e.editable)!==null&&g!==void 0&&g.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&(H.onValuesChange=We),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.Provider,{value:$,children:(0,i.jsx)(Ze.Z,(0,o.Z)((0,o.Z)((0,o.Z)({search:!1,options:!1,pagination:!1,rowKey:P,revalidateOnFocus:!1},b),Le),{},{tableLayout:"fixed",actionRef:$,onChange:T,editable:(0,o.Z)((0,o.Z)({},H),{},{formProps:(0,o.Z)({formRef:v},H.formProps)}),dataSource:n,onDataSourceChange:function(s){if(h(s),e.name&&E==="top"){var a,l=(0,X.Z)({},[e.name].flat(1).filter(Boolean),s);(a=v.current)===null||a===void 0||a.setFieldsValue(l)}}}))}),e.name?(0,i.jsx)(ve.Z,{name:[e.name],children:function(s){var a,l;if(!j.current)return j.current=n,null;var u=(0,p.Z)(s,[e.name].flat(1)),d=u==null?void 0:u.find(function(y,V){var A;return!(0,he.A)(y,(A=j.current)===null||A===void 0?void 0:A[V])});return j.current=n,d&&(e==null||(a=e.editable)===null||a===void 0||(l=a.onValuesChange)===null||l===void 0||l.call(a,d,u)),null}}):null]})}function ee(e){var m=ce.ZP.useFormInstance();return e.name?(0,i.jsx)(ye.Z.Item,(0,o.Z)((0,o.Z)({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps),{},{name:e.name,shouldUpdate:function(x,T){var R=[e.name].flat(1);try{return JSON.stringify((0,p.Z)(x,R))!==JSON.stringify((0,p.Z)(T,R))}catch(C){return!0}},children:(0,i.jsx)(_,(0,o.Z)((0,o.Z)({},e),{},{editable:(0,o.Z)((0,o.Z)({},e.editable),{},{form:m})}))})):(0,i.jsx)(_,(0,o.Z)({},e))}ee.RecordCreator=q;var Ce=ee,te=t(89861),Se=t(57572),be=t(61447),Te=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],je=c.forwardRef(function(e,m){var g=e.fieldProps,x=e.options,T=e.radioType,R=e.layout,C=e.proFieldProps,S=e.valueEnum,P=(0,W.Z)(e,Te);return(0,i.jsx)(be.Z,(0,o.Z)((0,o.Z)({valueType:T==="button"?"radioButton":"radio",ref:m,valueEnum:(0,G.h)(S,void 0)},P),{},{fieldProps:(0,o.Z)({options:x,layout:R},g),proFieldProps:C,filedConfig:{customLightMode:!0}}))}),Fe=c.forwardRef(function(e,m){var g=e.fieldProps,x=e.children;return(0,i.jsx)(te.ZP,(0,o.Z)((0,o.Z)({},g),{},{ref:m,children:x}))}),Ve=(0,Se.G)(Fe,{valuePropName:"checked",ignoreWidth:!0}),L=Ve;L.Group=je,L.Button=te.ZP.Button,L.displayName="ProFormComponent";var we=L,Ee=t(61660),Be=t(85307),$e=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(g){setTimeout(function(){g(!0)},m)})},De=[{id:624748504,title:"ROS\u673A\u5668\u2F08\u7F16\u7A0B",readonly:"ebook",created_at:1715486176e3,update_at:1715486176e3},{id:624691220,title:"ROS\u2F0A\u2ED4\u6559\u7A0B",readonly:"WhitePaper",created_at:1715596176e3,update_at:1715596176e3},{id:624691226,title:"ROS\u673A\u68B0\u81C2SLAM\u7814\u7A76",readonly:"paper",created_at:1715696176e3,update_at:1715696176e3},{id:624691229,title:"\u667A\u80FD\u673A\u5668\u2F08\u5728\u7EBF\u4EFF\u771F\u7814\u7A76",readonly:"manual",created_at:1715726176e3,update_at:1715726176e3}],Ie=function(){var e=(0,c.useState)([]),m=N()(e,2),g=m[0],x=m[1],T=(0,c.useState)([]),R=N()(T,2),C=R[0],S=R[1],P=(0,c.useState)("bottom"),D=N()(P,2),B=D[0],I=D[1],K=(0,c.useState)(!1),b=N()(K,2),j=b[0],$=b[1],v=[{title:"\u8D44\u6599\u540D\u79F0",dataIndex:"title",formItemProps:function(n,h){var f=h.rowIndex;return{rules:f>1?[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]:[]}},editable:function(n,h,f){return f!==0},width:"15%"},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"created_at",valueType:"date"},{title:"\u8D44\u6599\u6807\u7B7E",dataIndex:"readonly",tooltip:"\u5305\u62ECebook\u3001paper\u3001manual\u3001WhitePaper\u56DB\u79CD",valueEnum:{ebook:"ebook",paper:"paper",manual:"manual",WhitePaper:"WhitePaper"},width:"15%"},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(n,h){return[(0,i.jsx)("a",{href:"/ROS_robot.pdf",target:"_blank",rel:"noreferrer",children:"\u5728\u7EBF\u9884\u89C8"},"preLook"),(0,i.jsx)("a",{onClick:function(){S(C.filter(function(w){return w.id!==h.id}))},children:"\u5220\u9664"},"delete")]}}],J=function(n,h,f){console.log(f==null?void 0:f.source,n),Ee.ZP.success("\u5DF2\u627E\u5230\u76F8\u5173\u8D44\u6599"),$(!0)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(Be.Z,{placeholder:"\u641C\u7D22\u6846",onSearch:J,enterButton:!0,width:"10px"}),j?(0,i.jsx)(Ce,{rowKey:"id",headerTitle:"\u8D44\u6599\u7BA1\u7406",maxLength:5,scroll:{x:960},recordCreatorProps:B!=="hidden"?{position:B,record:function(){return{id:(Math.random()*1e6).toFixed(0)}}}:!1,loading:!1,toolBarRender:function(){return[(0,i.jsx)(we.Group,{fieldProps:{value:B,onChange:function(h){return I(h.target.value)}},options:[{label:"\u6DFB\u52A0\u5230\u9876\u90E8",value:"top"},{label:"\u6DFB\u52A0\u5230\u5E95\u90E8",value:"bottom"},{label:"\u9690\u85CF",value:"hidden"}]},"render")]},columns:v,request:Y()(M()().mark(function Z(){return M()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",{data:De,total:3,success:!0});case 1:case"end":return h.stop()}},Z)})),value:C,onChange:S,editable:{type:"multiple",editableKeys:g,onSave:function(){var Z=Y()(M()().mark(function h(f,w,F){return M()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return console.log(f,w,F),E.next=3,$e(2e3);case 3:case"end":return E.stop()}},h)}));function n(h,f,w){return Z.apply(this,arguments)}return n}(),onChange:x}}):(0,i.jsx)(i.Fragment,{})]})}}}]);
